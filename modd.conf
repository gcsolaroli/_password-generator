{
    prep: rm -rf output .cache .spago
}

spago.dhall {
    prep: echo "Purescript - installing new packages"
    prep: spago install --jobs 10
}

src/purescript/**/*.purs
src/purescript/**/*.js  {
    prep: echo "Purescript - changed files: " @mods
    # prep: spago bundle-app --to ./.target/js/index.js -- --output ./.target/.output --codegen js,sourcemaps --verbose-errors
    prep: spago bundle-app --to ./output/.target/js/index.js -- --output ./output --codegen js,sourcemaps --verbose-errors
}

src/html/**/*.html {
    prep: echo "HTML - changed files: " @mods
    prep: cp -R @mods ./output/.target/
}

src/scss/**/*.scss {
    prep: echo "SCSS - changed files: " @mods
    prep: sass src/scss/Main.scss ./output/.target/css/main.css
}

target/**/* {
    daemon: parcel --out-dir ./output/.dist ./output/.target/index.html
}